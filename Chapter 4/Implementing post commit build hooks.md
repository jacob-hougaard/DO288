# Implementing Post-commit Build Hooks

## Describing Post-commit Build Hooks

Red Hat OpenShift Container Platform (RHOCP) provides the `post-commit` build hook functionality to perform validation tasks during builds. The `post-commit` build hook runs commands in a temporary container before pushing the  new container image generated by the build to the registry. The hook  starts a temporary container using the container image created by the  build.

Depending upon the exit code from the command execution in  the temporary container, RHOCP either will or will not push the image to the registry. If the command returns a non-zero exit code, indicating  failure, RHOCP does not push the image and marks the build as failed. If the command succeeds, RHOCP pushes the image to the registry.

You can verify that a build failed because of a post-commit hook by examining the build logs using the `oc logs` command:

```
oc logs bc/name
```

#### eviewing Use Cases for Post-commit Build Hooks

A typical scenario to use a post-commit build hook is to execute some  tests in your application. This way, before RHOCP pushes the image to  the registry and starts a new deployment, tests can check if the  application is working correctly. If the test fails, the build fails and does not continue with a deployment.

There are a few other common use cases where it can be useful to leverage a post-commit build hook. For example:

- To integrate a build with an external application through an HTTP API.
- To validate a non-functional requirement such as application performance, security, usability, or compatibility.
- To send an email to the developer's team informing them of the new build.

Lig mærke til at der er to dashes uden noget. Det er ikke en fejl, det er faktisk fordi den første.

```
oc set build-hook bc/name --post-commit \
--command -- bundle exec rake test --verbose
```